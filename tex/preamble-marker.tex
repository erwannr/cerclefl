% -----------------------------------------------------------------
% Copyright (C) 2025 by La bergerie de Floride (Erwann Rogard)
% Source repository: https://github.com/erwannr/bergeriefl
% 
% LaTeX code:
% Released under the LaTeX Project Public License v1.3c or later
% See http://www.latex-project.org/lppl.txt
% 
% Written content (text):
% CC BY-NC-SA 4.0
% -----------------------------------------------------------------

\ExplSyntaxOn

\fp_new:N \g__erw_marker_scale_fp
\fp_set:Nn \g__erw_marker_scale_fp { 0.8 }

\cs_new:Npn \__erw_marker_typeset:nn #1 #2
{
  \scalebox{\fp_use:N\g__erw_marker_scale_fp}{#1}#2
}

\ProvideDocumentCommand{\MarkerTypeset}{omm}
{
  % #1 = optional tcbox parameters
  % #2 = name of fa font (e.g., \faEyeSlash)
  % #3 = text
  
  \IfPackageLoadedT{tcolorbox}
  {
    \IfValueTF{#1}
    {
      \tcbox[on~line,#1]
    }
    {
      \tcbox[on~line]
    }
  }
  {
    \IfPackageLoadedTF{fontawesome5}
    {\__erw_marker_typeset:nn{#2}{#3}}%
    {#3}%
  }%
}

\ExplSyntaxOff
